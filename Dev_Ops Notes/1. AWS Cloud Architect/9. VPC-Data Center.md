## Data Center -VPC

- airbnb is our client- first step we do is to create a aws account
- then we create a data center[virtual private cloud-VPC-172.30.0.0/16]-and we assign network [172.30.0.0/16] to vpc [without network how can we work in teams]
-  in this network we create our infra[DB, servers,......]. this network is secure no one cannot come inside this network and if they want to leave network there is a process to do it
- some servers can be public access but DB is always a private access
- so we need two networks so we subnet the main vpc
	- 1. pvt subnet [web server, DB]  [for HA- one in 1a, another 1b zones]
	- 2. public subnet [jump server, vpn server]  [for HA- one in 1a, another 1b zones]
- company will see the higher avalability of these networks so company will create these sub networks in multiple zones [to protect them from cloud down/disaster]
-  Route table is used to send traffic from aws to out side
	- there are 2 routr tables
		- 1. pvt route table-->associated with pvt subnet-->uses nad gateway to send traffic
		- 2. public route table-->associated with pvt subnet-->uses internet gateway to send traffic 
- first we create internet gateway -->attaches it to VPC
- then we go to public route table-->you will have option called route-->we have to define route of where to send traffic[destination]-->enter 0.0.0.0[any network-internet] via internet gateway
- what ever ips we store in pub route table are accessible via internet
- same process for pvt traffic but we use nad gateway

## create VPC
- -->go to vpc-->create vpc
- -->vpc only
- -->name: SBI-VPC [very imp in companies]
- -->ipv4 cidr-->172.30.0.0/16 [if you dont know the network ask client/team. if they dont know then use this network. dont take your own decession]
- -->tenancy-->default[read about tenancy]
- -->create vpc-->done

## create subnets
- -->we can calculate the subnets in google with the given ip
- here we are creating 2 subnets for each network[public and private]-for higher availability
- -->create subnet
- -->vpc id-->select SBI-VPC
### 1. Add new subnet-public-1
- -->subnet name-->SBI-Public-Subnet-1 [we create 2/each]
- -->Availability Zones-->us-east-1a
- -->ipv4 cidr block-->172.30.0.0/24[use subnet calculater if you donk know]
### 2. Add new subnet-public-2
- -->subnet name-->SBI-Public-Subnet-2 [we create 2/each]
- -->Availability Zones-->us-east-1b[different availabity zones- disaster recovery technique]
- -->ipv4 cidr block-->172.30.16.0/24
### 3. Add new subnet-private-1
- -->subnet name-->SBI-Private-Subnet-1 [we create 2/each]
- -->Availability Zones-->us-east-1a[different availabity zones- disaster recovery technique]
- -->ipv4 cidr block-->172.30.32.0/24
### 4. Add new subnet-private-2
- -->subnet name-->SBI-Private-Subnet-2 [we create 2/each]
- -->Availability Zones-->us-east-1b[different availabity zones- disaster recovery technique]
- -->ipv4 cidr block-->172.30.64.0/24
- -->create-->done

## Create Route table
- create 2 route table
### 1. public
- -->route table-->create route table
- -->name--> SBI-Public-rt
- -->vpc : SBI-VPC
- -->launch
	### subnet associations
	- -->go to subnet association-->edit
	- -->select two public subnets
	- -->save
### 2. private
- -->route table-->create route table
- -->name--> SBI-Private-rt
- -->vpc : SBI-VPC
- -->launch
	### subnet associations
	- -->go to subnet association-->edit
	- -->select two Private subnets
	- -->save

## Public-Internet Gateway
- -->create internet gateway
- -->name -->SBI-IGW-->save
	### attatch it to vpc
	- -->actions-->attatch to vpc : SBI-VPC
	### define that in route table
	- -->select public route table : SBI-Public-rt
	- -->route-->edit
	- -->add route
	- -->destination : 0.0.0.0/0 [anywhere]
	- -->target-->internet gateway[SBI-IGW]
	- -->save changes
- done[ any thing built on these subnets can accessible from internet]
- when we create instance/anything and use this subnet means public accessible

## Private-NAT gateway
- lets supose webserver/sql installed and you need internet to update these
- so we have to send private traffic to outside but not public traffic to inside
- [by default NAT gateway is connected to internet internally]
- -->create NAT gateway
- -->name: SBI-NAT-GW
- -->sub net: take public subnet[any one among two is fine]  [since private traffic also sent through internet thats y]
- -->allocate elastic IP[this elastic IP is connected to internet internally]
- -->create
	### define that in route table
	- -->select private route table: SBI-Private-rt
	- -->route-->edit
	- -->add route
	- -->destination-->0.0.0.0/0
	- -->target-->NAT gateway
	- -->save changes
- done


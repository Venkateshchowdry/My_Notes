- jenkins is a tool used for automation
	- scripts automate
	- docker files automate
	- create cicd pipelines[getting code from github, build docker image, and push into server] and [can automate eaverything]
- after developer push code in to git repo
	- we use jenkins to build the code
	- inside jenkins we create jobs[pull the code and build process] 
	- there are multiple ways to run the jobs
- There are multiple ways to install jenkins
## 1. Manual Installation-Jenkins-Server
### On ubuntu
- -->sudo apt update [update our system]
- -->sudo apt install openjdk-11-jre [install java - java is a dependency]
- -->java --version [validate installation]
- -->curl -fsSL https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo tee \
  /usr/share/keyrings/jenkins-keyring.asc > /dev/null
echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
  https://pkg.jenkins.io/debian-stable binary/ | sudo tee \
  /etc/apt/sources.list.d/jenkins.list > /dev/null
  - [copy cmd from google]
  - -->sudo apt-get update
  - -->sudo apt-get install jenkins
  - -->jenkins --version
  - -->done
### On Amazon-Linux-2
-  -->sudo yum update
- -->sudo yum install java* -y
- -->java --version
-  google jenkins download [jenkins.io]
	- select redhat/centOS/fedora [since same for Amazon linux2]
	- cp the cmds 
	- success
	- -->jenkins --version

### 1.1. Start Jenkins
- -->sudo systemctl enable jenkins
- -->sudo systemctl start jenkins 
- -->sudo systemctl status jenkins
	- actively running
- -->ctrl + c [exit]
- [jenkins will run on port 8080]
### 1.2. access jenkins from browser
- so enable custom tcp port 8080 in SG  of the server[source anywhere] and save
- now copy server public ip and paste it in browser[ip:8080]
- -->done success[accessed through browser]
- to unlock the jenkins we need a password
	- copy the path in the webpage and go to server
	- -->sudo cat [path]
	- -->copy the password and paste it in the browser
- jenkins will run on plugins[git plugin, docker plugin, source control plugin, bash plugin]
### 1.3. Install suggested plugins
- -->create first admin user
	- -->username : devops-venkatesh[always write the position name along with name]
	- -->pswd: Vs@architect2022
	- -->confirm pswd: 
	- -->full name:
	- -->email: [enter all these details]
	- -->save and finish
	- -->done
- now we can use jenkins successfully
- -->sudo systemctl stop jenkins [stopping jenkins]
- -->sudo systemctl status jenkins 
### 1.4. Login to jenkins
- -->[ip] : 8080
- -->username:
- -->password:
- ### forgot user name and password
- one method : allowing a signup option in the home page
	- -->cd /var/lib/jenkins
	- -->sudo vi config.xml-->i
		- -->disable signup:flase  [set it to false before it is true]
			- set it to true once you create a another profile
		- or
		- -->user security :false [it will disable the password feature for the user] 
			- echo "this option is not working as it resetting to its previous version file after restarting"
	- -->esc-->:wq[if it dont commit do it forcefully :wq!]
	- -->sudo systemctl restart jenkins
	- [now go to webbrowser and ip:8080]
- --> after log in to jenkins
	- -->people-->select id
		- -->configure 
		- 

## 2. installing jenkins using docker[Automation]
- go to server we can install only one jenkins so stop it if you already have it
- -->docker
- -->sudo systemctl status jenkins[make sure you dont have jenkins on server]]
- -->sudo docker pull jenkins/jenkins [it will automatically install jenkins]
	- jenkins/jenkins [docker image name]
### jenkins running on container
- -->sudo docker ps
- -->sudo docker run -d -p 8001:8001 [docker image id]
- -->[docker.io/jenkins/jenkins:latest]
	- docker image id of jenkins -->available at the end after installation
- -->sudo docker run -d -p 8080:8080 docker.io/jenkins/jenkins:latest
	- jenkins running in deamon mode
### Docker cmds
- -->sudo docker kill [container id]
	- if docker image is not working or something happened
- -->sudo docker rm [container id]
- [refresh the browser your jenkins is running-->success]

## Industry Std
- Install jenkins servers in ASG Config file in EC2-Ubuntu


## Benefit of Integration of  Jenkins with GIT HUB

- even if we dont integrate github with jenkins it will woek 
	- but integration makes it smooth
- There are multipleways to run a job[we can see the options in the jenkins server ]
	- 1. Manual
		- click on build now button
	- 2. Trigger Builds remotly
		- authentication token : [give any number]
		- we will get url
			- access remotely with url and run the job
	- 3. Build after other projects are build
		- projects to watch : [job that needs to be performed before the actual job]
	- 4. Build periodically [lets say every 5 min we can define time]
		- schedule :[*****] // [every hour every minute]
			- it is a corn type syntax
	- 5. Poll SCM 
		- lets say we set it for every 5 min then it will check the integrated git url every 5 min whether any new commits are done by developer or not. if new commit is there then it will run the job.
		- -->schedule : [*****]
	- 6. GIT HUB Hook Trigger for GITscm polling
		- -// automatic trigger whenever developer commit the code
			- [most used on in the job]
- we can only use option 5 and 6 only when the jenkins server is integrated with the GIT HUB
## 3. Integration with github repo
- [here our developer system and jenkins server are in aws cloud ]
- to integrate we need
	- ip address of jenkins [copy]   [IP:8080]
	- port number[copy]
	- token [token generation see below]
		- for access deligations 
to use in githubs repository web hook
- [go to github repository] //bellyworks
	- -->settings
		- -->webnooks [asks for otp]
			- -->add webhook
				- -->payload url : http://54.164.25.248:8080/github-webhook/
				- here we have to add [github-webhook/] after the jenkins url
				- -->content type : application json
				- -->secret : 1112bf56f89a71fbb390b695949399b843
					- [token generation in jenkins]
			- -->addwebhook
- refresh the page we will see greeen tick in github-->success
 
### Token generation in jenkins
- -->people
	- -->configure
		- -->api token
			- -->generate token
				- 1112bf56f89a71fbb390b695949399b843
				- copy this and save in notepad since it will not be available after
				- -->apply
			- -->save
## 4. Creating jobs
- -->create jobs -->give any name
	- -->free style
		- -->configure
			- -->source code management
				- -->add repo url
				- [make sure git is installed in jenkins server] if not it will show error
			- -->build triggers
				- here we select nothing for this job
		- --> apply
	- -->save
- view jobs-->select job-->build now-->green -->success
- we can see the console output here

## after job run
- the file build after the job run is stored in 
	- Building in workspace /var/lib/jenkins/workspace/Bellyworks_Job
		- we see this in console output

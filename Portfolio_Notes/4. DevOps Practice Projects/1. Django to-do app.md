### Test on local system
- -->VS Code
- -->open integrated terminal of the project folder
- --> git clone https://github.com/shreys7/django-todo.git
	- //clone from github
- //now we have to run the code so create a virtual environment[since we have to work with different python version and many more dependencies]
### Create virtual environment in windows
- -->pip install virtualenv
- -->python -m virtualenv myenv
	- [myenv] is the name of the environment
	- creating virtual env
- -->-cd venv
		-cd Scripts
		-activate.bat
	// run all the three cmds
- [but still some error]
- -->preferences-->settings-->search venv-->copy the path upto activate.bat file in the myenv [of the current appliaction]and paste it here[replace \ with \\ in whole path except the first \ after the directory]
	- now close the terminal and program and open again
	- but still shows some windows permission error so paste the below cmd in the terminal
- -->Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
- [close all the terminals and paste them again]
- -->done [now we are in the virtual environment]
- -->pip install django [we get a error so we installed]
- -->python manage.py makemigrations [from now on read me file cmds]
- -->python manage.py migrate [read me]
- -->python manage.py createsuperuser[read me]
- -->given my name: venkatesh
- -->mail : venkateshchowdary1@outlook.com
- -->pswd
- -->again pswd
- -->done
- -->python manage.py runserver
- // now server is running-->it will display the local host ip address-->click it you will see the app running
- -->ctrl+c [to stop the server]
- -->pip freeze > requirements.txt 
	- we have to add the extra requirements which we did during the running of the app like django installation step is not there in the read me
	- this cmd will automatically create the requirements here
- -->git checkout -b feature/deploy-app
	- creating a new branch of the previous code 
- -->git add .
- -->git commit -m "added requirements"
- -->git status
- -->git push [path of the repository where you want to push the new branch code]

## Run the app on EC2 Server
- -->create a ubuntu server[this is our private serrver]  [it is accessed by our vpn]
- -->ssh ubuntu@[public ip] -i abhiram.pem
- -->mkdir projects
- -->cd projects/
- -->git clone [path of the git repo]
- -->cd django-todo/ [folder where all the executing files are present]
- -->sudo apt-get update
	- //update the system
- -->python manage.py runserver[to run the server-app]
- 
- -->sudo pip3 install django 
	- // if pip3 is not installed install pip3
- -->sudo apt install python3-pip
- -->sudo pip3 install django
- [now follow the read me notes] //above all are dependencies
- -->python manage.py runserver [again run the server]
- -->as a DevOps Engineer we have to solve the errors in different languages[django, node js, java, ]so dont worry ask developer or search in stack overflow
- -->here we get an error of time zone-->so we set it to Asia/Dhaka
	- vim todoApp/settings.py
	- i [insert mode]
	- esc-->:wq! [save]
- -->again run the server
- if warnings are there just ignore them
- -->now your server is running at the http://172.0.0.1:8000/ [local host]
- [but we want to access from anywhere 0.0.0.0:8000] //port 8000
- -->python3 manage.py runserver 0.0.0.0:8000
- we can give any port number//[doesnt matter]
- -->copy the public ip adddress of the ubuntu server and add the port /8000 at last and search it in the web it will not display any thing
- -->here we have to allow this port number in SG group of the Ubuntu Server
	- -->security
	- -->SG-ALB-->inbound rules-->edit
	- -->custom TCP
	- -->port 8000
	- -->source 0.0.0.0/0 [any where]
	- 
- -->copy the public ip of the [ubuntu server ip]:8000 in the webbrowser           -->worked
- ![[Pasted image 20221108171449.png]]
- -->we got this error
- we have to add this host in settings,py
- -->vi todoApp/settings.py
	- -->search for allowed hosts
	- -->we can enter either the shown ip or '*' [means allow any ip]
	- esc-->:wq
- -->python3 manage.py runserver 0.0.0.0:8000
- -->app running fine 
- -->success
### Logs
- once the app is running on server we will get logs [in shell]
- but we want to run the app in background and we have to make docker and many more so for that
### nohup and & [concept]
- -->nohup python3 manage,py runserver 0.0.0.0:8001 &-->enter
- -->enter again
- [now app is running background]
- -->lsof -i:8001 
	- to check which services are working in specific port
- -->kill -9 [process id]
	- it will kill the process

### Docker
- it mainly has two parts used to create virtual environments 
	- 1. image
		- of the application
	- 2. container
		- images run inside containers
- --> docker [check whether docker is installed in machine or not]
- -->sudo apt install docker.io [ install docker]
- -->docker --version
### create docker file
- -->vi Dockerfile [only D is capital]
- -->[we have to add all steps which we did to  run our app inside the venv in local host]
- // simply a file to automate the app installation and running process
	- -->FROM python:3 [a container with ubuntu os already running and python installed]
	- -->RUN pip install django[==] 3.2   [we installed django 3.2 ]
	- //== only not included []
	- -->COPY . .  [first dot is source and second dot is destination]
		- we are copying code inside the docker
		- docker file is at source [inside the app]
	- -->RUN python manage.py migrate
	- -->CMD ["python","manage.py","runserver","0.0.0.0:8001"]
	- esc-->:wq
- -->[DOCKER FILE IS DONE]
### Build Docker file
- -->sudo docker build . -t todo-app [ dot means in present directory where we write the docker file nad t means lable/tag name]
- -->[we will get an image id of the docker]
- // if we have errors we have to resolve them
- -->sudo docker ps
- ![[Pasted image 20221108181703.png]]
- if there are no details display there then it means that no containers are running
### run container
- -->docker image will take all the ports of the machine
- -->sudo docker run -p 8001:8001 [docker image id]
	- 8001 is the port where our app is running and 8001 is the port of the container
	- it is called port mapping
- -->go to browser add ubuntu server ip:8001-->enter
- -->app is running
- -->success
- -->ctrl+c [exit from server]
- -->sudo docker ps
- -->sudo docker run -d -p 8001:8001 [docker image id]
	- -d means deamon mode[container will run in background]
	- now do sudo docker ps
		- WE will see the container id running in the background
- -->sudo docker stop [docker container id]
	- to stop the container running in  the background
- -->sudo docker ps

